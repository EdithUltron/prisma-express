generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x", "linux-arm64-openssl-1.1.x", "rhel-openssl-1.0.x"]
  // binaryTargets = ["native"]
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model admin {
  id         String   @id @default(uuid())
  adminEmail String   @unique
  adminPhone String   @unique
  password   String
  firstName  String?
  lastName   String?
  role       Role     @default(HOD)
  branchId   String?
  branch     Branch?  @relation(fields: [branchId], references: [id])
  about      String?
  createdOn  DateTime @default(now())
  updatedOn  DateTime @updatedAt

  @@unique([adminEmail, adminPhone])
  @@index([adminEmail])
  @@index([adminPhone])
}

model studentRegister {
  id           String @id @default(uuid())
  studentEmail String @unique
  studentPhone String @unique

  dob                   DateTime?   @db.Date
  firstName             String?
  lastName              String?
  branchId              String?
  reservationCategoryId String?
  bloodGroup            bloodGroup?
  gender                Gender?
  communityId           String?
  annualIncome          String?
  address               String?
  religion              Religion?
  nationality           String?
  fatherName            String?
  fatherOccupation      String?
  fatherPhone           String?
  isRegistered          Boolean?    @default(false)

  state    String?
  district String?
  mandal   String?
  city     String?

  admissionExamsId String?
  rank             String?
  program          String?
  permanentAddress String?
  studentAadhaar   String? @unique
  yearOfAdmission  String?

  motherAadhaar String?
  fatherAadhaar String?
  createdOn     DateTime @default(now())
  updatedOn     DateTime @updatedAt

  branch        Branch?         @relation(fields: [branchId], references: [id])
  Category      Category?       @relation(fields: [reservationCategoryId], references: [id])
  community     Community?      @relation(fields: [communityId], references: [id])
  admittedUnder admissionExams? @relation(fields: [admissionExamsId], references: [id])
  Student       Student?

  @@unique([studentEmail, studentPhone])
  @@index([studentEmail])
  @@index([studentPhone])
}

// joinedProgram Program?        @relation(fields: [programId], references: [id])

model Student {
  id                  String                @id @default(uuid())
  studentRegisterId   String                @unique
  password            String
  rollNumber          String?               @default("not-assigned")
  about               String?
  college             String?
  role                Role                  @default(STUDENT)
  pid                 Projects[]
  education           Education[]
  experience          Experience[]
  volunteering        Volunteering[]
  socialIdentifiers   socialIdentifiers[]
  studentCertificates studentCertificates[]
  studentPublications studentPublications[]
  studentPatents      studentPatents[]
  participationExams  participationExams[]
  achievements        Achievements[]
  coCurricular        coCurricular[]
  extraCurricular     extraCurricular[]
  skills              Skills[]

  createdOn DateTime        @default(now())
  updatedOn DateTime        @updatedAt
  sid       studentRegister @relation(fields: [studentRegisterId], references: [id], onDelete: Cascade)

  @@unique([rollNumber, studentRegisterId])
  @@index([studentRegisterId])
}

enum bloodGroup {
  O_POS
  O_NEG
  A_POS
  A_NEG
  B_POS
  B_NEG
  AB_POS
  AB_NEG
  OTHER
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum Program {
  BTECH
  MTECH
  MCA
  MBA
  BPHARM
  MPHARM
  MS
  BSC
  OTHER
}

enum Religion {
  HINDUISM
  ISLAM
  CRISTIANITY
  SIKHISM
  BUDDHISM
  JAINISM
  OTHER
}

model Branch {
  id               String            @id @default(uuid())
  name             String            @unique
  imageUrl         String?
  slugLine         String?
  Student_Register studentRegister[]
  admin            admin[]

  @@index([name])
}

model Category {
  id               String            @id @default(uuid())
  category_name    String            @unique
  Student_Register studentRegister[]
}

model Community {
  id              String            @id @default(uuid())
  communityName   String            @unique
  studentRegister studentRegister[]
}

model admissionExams {
  id              String            @id @default(uuid())
  examName        String            @unique
  studentRegister studentRegister[]
}

// btech,mtech...
// model Program {
//   id              String            @id @default(uuid())
//   programName     String            @unique
//   studentRegister studentRegister[]
// }

model Projects {
  id          String   @id @default(uuid())
  projectName String
  duration    String
  description String
  url         String?
  studentId   String
  skills      Skills[]
  sid         Student  @relation(fields: [studentId], references: [id],onDelete: Cascade)
}

model Experience {
  id          String         @id @default(uuid())
  et          experienceType
  mode        experienceMode
  description String
  company     String
  role        String
  startDate   DateTime       @db.Date
  endDate     DateTime?      @db.Date
  studentId   String
  sid         Student        @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

enum experienceType {
  JOB
  INTERNSHIP
  APPRENTICESHIP
  OTHER
}

model Skills {
  id        String     @id @default(uuid())
  skillName String     @unique
  icon      String?
  projects  Projects[]
  student   Student[]
}

enum experienceMode {
  ONSITE
  REMOTE
  HYBRID
}

model Volunteering {
  id               String    @id @default(uuid())
  organizationName String
  description      String
  role             String
  startDate        DateTime  @db.Date
  endDate          DateTime? @db.Date
  Student          Student?  @relation(fields: [studentId], references: [id], onDelete: Cascade)
  studentId        String?
}

model socialIdentifiers {
  id        String  @id @default(uuid())
  name      Socials
  url       String
  studentId String
  Student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

enum Socials {
  PERSONAL_WEBSITE
  LINKEDIN
  YOUTUBE
  TWITTER
  DISCORD
  FACEBOOK
  INSTAGRAM
  BLOG
}

model studentCertificates {
  id                 String    @id @default(uuid())
  certificateName    String
  issuedOrganization String
  issuedDate         DateTime  @db.Date
  validDate          DateTime? @db.Date
  certificateUrl     String
  studentId          String?
  Student            Student?  @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

model Education {
  id            String         @id @default(uuid())
  instituteName String
  place         String?
  startDate     DateTime       @db.Date
  endDate       DateTime?      @db.Date
  grades        String
  description   String?
  program       EducationType?
  board         String? // for 10th
  fieldOfStudy  String // branch, mpc, 10th - state
  studentId     String?
  Student       Student?       @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

enum EducationType {
  PRIMARY
  SECONDARY
  INTERMEDIATE
  UNDERGRADUATE
  POSTGRADUATE
  PHD
  VOCATIONAL
  PROFESSIONAL
}

model studentPublications {
  id               String   @id @default(uuid())
  publicationTitle String
  publisher        String
  date             DateTime @db.Date
  url              String
  description      String?
  Student          Student? @relation(fields: [studentId], references: [id], onDelete: Cascade)
  studentId        String?
}

model studentPatents {
  id            String   @id @default(uuid())
  patentTitle   String
  applicationNo String
  date          DateTime @db.Date
  url           String
  description   String
  studentId     String
  Student       Student  @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

model participationExams {
  id            String   @id @default(uuid())
  examName      String
  rank          String
  date          DateTime @db.Date
  description   String?
  hallTicketUrl String?
  resultUrl     String?
  studentId     String
  Student       Student  @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

model Achievements {
  id               String          @id @default(uuid())
  achievementType  achievementType
  achievementTitle String
  issuer           String
  date             DateTime        @db.Date
  description      String
  studentId        String
  Student          Student         @relation(fields: [studentId], references: [id], onDelete: Cascade)
}

enum achievementType {
  HONOR
  AWARD
}

model coCurricular {
  id             String   @id @default(uuid())
  name           String
  description    String
  date           DateTime @db.Date
  certificateUrl String
  Student        Student? @relation(fields: [studentId], references: [id], onDelete: Cascade)
  studentId      String?
}

model extraCurricular {
  id             String   @id @default(uuid())
  name           String
  description    String
  date           DateTime @db.Date
  certificateUrl String
  Student        Student? @relation(fields: [studentId], references: [id], onDelete: Cascade)
  studentId      String?
}

enum Role {
  STUDENT
  FACULTY
  HOD
  EXAM_ADMIN
  ADMINISTRATION_ADMIN
  REGISTRAR
  PRINCIPAL
  VICE_CHANCELLOR
  ALUMNI_ADMIN
  CERTIFICATE_ADMIN
  SUPERADMIN
  STAFF
}

// model Faculty {
//   id            String      @id @default(uuid())
//   facultyEmail  String      @unique
//   facultyPhone  String      @unique
//   firstName     String?
//   lastName      String?
//   bloodGroup    bloodGroup?
//   gender        Gender?
//   dob           DateTime?   @db.Date
//   address       String?
//   religion      Religion?
//   nationalityId String?
//   role          Role        @default(FACULTY)
//   password      String
//   about         String?
//   createdOn     DateTime    @default(now())
//   updatedOn     DateTime    @updatedAt
// }
